version: 2

models:
  - name: flavor_profiles
    description: "Bridge table representing unique combinations of flavors"
    tests:
      - unique:
          column_name: "(flavor_profile_key || '-' || flavor_id)"
    columns:
      - name: flavor_profile_key
        description: "Surrogate key corresponding to multiple flavors and used as a foreign key in `coffees`"
        tests:
          - relationships:
              to: ref('coffees')
              field: flavor_profile_key
      - name: flavor_id
        description: "Foreign key for `flavors`"
        tests:
          - relationships:
              to: ref('flavors')
              field: flavor_id
