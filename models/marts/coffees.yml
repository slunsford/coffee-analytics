version: 2

models:
  - name: coffees
    description: Dimension table for individual coffee products
    columns:
      - name: coffee_id
        description: Primary key (record ID from Airtable)
        data_tests:
          - unique
          - not_null
      - name: coffee_name
        description: Name of the coffee
        data_tests:
          - not_null
      - name: roaster
        description: Roaster
        data_tests:
          - not_null
      - name: country
        description: Country of origin
        data_tests:
          - not_null
      - name: world_region
        description: Continent/world region of origin
        data_tests:
          - not_null
      - name: country_region
        description: Locality within country of origin
      - name: availability
        description: Current availability for purchase
      - name: caffeine_content
        description: Decaf/regular
        data_tests:
          - accepted_values:
              values: ["Decaf", "Regular"]
      - name: roast_darkness
        description: Light/medium/dark
      - name: varietal
        description: Varietal
      - name: process
        description: Coffee cleaning/processing method
      - name: elevation_min
        description: Minimum elevation (meters)
      - name: elevation_max
        description: Maximum elevation (meters)
      - name: elevation
        description: Elevation range
        data_tests:
          - not_null
      - name: flavor_profile_key
        description: Foreign key for `flavor_profiles`
        data_tests:
          - relationships:
              to: ref('flavor_profiles')
              field: flavor_profile_key
      - name: added_at
        description: Date coffee added to log
        data_tests:
          - not_null
      - name: rating
        description: Value of most recent rating
      - name: rated_date
        description: Date of most recent rating
