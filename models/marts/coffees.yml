models:
  - name: coffees
    description: Dimension model consolidating coffee details with derived attributes, joining coffee, origin, and elevation information
    columns:
      - name: coffee_id
        description: Unique identifier for the coffee
        data_tests:
          - unique
          - not_null

      - name: coffee_name
        description: Name of the coffee

      - name: origin_id
        description: Unique identifier for the country of origin

      - name: country
        description: Country of origin, defaulting to '[Blend]' for blended coffees

      - name: world_region
        description: Geographic region of the world where the coffee originates, defaulting to '[Blend]' for blended coffees

      - name: country_region
        description: Region within the origin country where the coffee is grown

      - name: roaster_id
        description: Unique identifier for the roaster

      - name: roaster
        description: Name of the roaster

      - name: is_available
        description: Boolean indicating if the coffee is currently available

      - name: availability
        description: Descriptive representation of coffee availability
        data_tests:
          - accepted_values:
              values: ['Available', 'Unavailable']

      - name: rating
        description: Raw rating value for the coffee

      - name: rating_value
        description: Normalized rating value

      - name: is_liked
        description: Boolean indicating if the coffee was rated positively

      - name: is_disliked
        description: Boolean indicating if the coffee was rated negatively

      - name: rated_date
        description: Date when the coffee was rated

      - name: is_decaf
        description: Boolean indicating if the coffee is decaffeinated

      - name: caffeine_content
        description: Descriptive representation of coffee's caffeine level
        data_tests:
          - accepted_values:
              values: ['Decaf', 'Regular']

      - name: caffeine_emoji
        description: Emoji representing the coffee's caffeine content
        data_tests:
          - accepted_values:
              values: ['üò¥', 'üòµ‚Äçüí´']

      - name: roast_darkness
        description: Level of roast darkness

      - name: varietals
        description: Array of coffee varietals

      - name: process
        description: Processing method used for the coffee, defaulting to '[Unknown]' if not specified

      - name: elevation_min
        description: Minimum elevation where the coffee is grown

      - name: elevation_max
        description: Maximum elevation where the coffee is grown

      - name: elevation
        description: Formatted elevation range or specific elevation of the coffee

      - name: flavor_profile_key
        description: Unique identifier for the flavor profile
        data_tests:
          - relationships:
              to: ref('flavor_profiles')
              field: flavor_profile_key
              severity: error

      - name: added_at
        description: Timestamp when the coffee was added to the system

      - name: modified_at
        description: Timestamp when the coffee was last modified
