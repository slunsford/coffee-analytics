models:
- name: flavor_ratings
  description: Combined model with ratings by flavor
  data_tests:
  - dbt_utils.unique_combination_of_columns:
      combination_of_columns:
        - flavor_id
        - rating_id
        
  columns:
    - name: flavor_id
      data_type: varchar
      description: Foreign key for `flavors`

    - name: rating_id
      data_type: varchar
      description: Primary key (record ID from Airtable)

    - name: coffee_id
      data_type: varchar
      description: Unique identifier and FK for `coffees`

    - name: flavor
      data_type: varchar
      description: Description of the flavor

    - name: primary_flavor_category
      data_type: varchar
      description: First category listed

    - name: flavor_categories
      data_type: varchar
      description: Comma separated list of flavor categories

    - name: brew_method
      data_type: varchar
      description: Brew method, e.g. AeroPress, Etkin, etc.

    - name: rating
      data_type: varchar
      description: Rating given

    - name: is_liked
      data_type: boolean
      description: Indicates whether the coffee is liked

    - name: rating_value
      data_type: integer
      description: Numeric value assigned to the rating (for calculating net ratings, etc.)

    - name: rated_date
      data_type: date
      description: Date the coffee was rated

    - name: is_current
      data_type: boolean
      description: Indicates whether this is the most recent rating for this coffee
